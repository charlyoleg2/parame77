import{a as pa,b as Wa}from"../chunks/DJnfHx6C.js";import{H as Ya,a as Oa,g as Va}from"../chunks/Bqq41-OR.js";import"../chunks/DsnmJJEf.js";import{E as ea,aP as ba,a5 as Za,j as qa,aQ as Ea,aR as Ka,I as Ga,aS as Ba,a0 as Ue,n as Pa,a6 as Fa,aT as Ha,aU as Ja,aV as Qa,ae as h,Q as o,aA as $a,ad as se,aW as Rt,p as ft,aq as Ye,a as Lt,b as O,c as _t,f as U,d as r,r as a,t as tt,s as l,ap as G,ar as bt,e as w,at as Dt,u as ga,aX as Ie,aY as Qe,as as ja,aZ as ma,a_ as ya,a$ as ts}from"../chunks/DhFgaqj6.js";import{s as Z,e as Ot,D as lt,F as aa,G as es,H as as,I as ss,J as ls,K as xa,P as $e,L as wa,M as ta,N as ee,O as rs,Q as ns,R as os,T as cs,U as da,V as is,W as Da,b as be,v as ua,X as nt,Y as vs,Z as za,_ as ds,$ as us,a0 as fs,a1 as _s}from"../chunks/CnQuUVUo.js";import{p as St,i as ae,b as sa}from"../chunks/DwPl7Vpi.js";import{b as la}from"../chunks/zYxCxKXN.js";import{s as ms}from"../chunks/C9IY43YA.js";import{p as La,i as bs}from"../chunks/Bga7U5Yu.js";import{a as gs,o as xs}from"../chunks/BfCevhbk.js";import"../chunks/D4tZZdj9.js";function Ma(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(s=Ma(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function ks(){for(var e,t,s=0,n="",c=arguments.length;s<c;s++)(e=arguments[s])&&(t=Ma(e))&&(n&&(n+=" "),n+=t);return n}function Sa(e){return typeof e=="object"?ks(e):e??""}const Na=[...` 	
\r\fÂ \v\uFEFF`];function hs(e,t,s){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),s){for(var c in s)if(s[c])n=n?n+" "+c:c;else if(n.length)for(var i=c.length,v=0;(v=n.indexOf(c,v))>=0;){var d=v+i;(v===0||Na.includes(n[v-1]))&&(d===n.length||Na.includes(n[d]))?n=(v===0?"":n.substring(0,v))+n.substring(d+1):v=d}}return n===""?null:n}function pt(e,t,s,n,c,i){var v=e.__className;if(ea||v!==s||v===void 0){var d=hs(s,n,i);(!ea||d!==e.getAttribute("class"))&&(d==null?e.removeAttribute("class"):e.className=d),e.__className=s}else if(i&&c!==i)for(var u in i){var p=!!i[u];(c==null||p!==!!c[u])&&e.classList.toggle(u,p)}return i}function Ta(e,t,s=!1){if(e.multiple){if(t==null)return;if(!qa(t))return Ea();for(var n of e.options)n.selected=t.includes(We(n));return}for(n of e.options){var c=We(n);if(Ka(c,t)){n.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function ps(e){var t=new MutationObserver(()=>{Ta(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ga(()=>{t.disconnect()})}function Aa(e,t,s=t){var n=!0;ba(e,"change",c=>{var i=c?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(i),We);else{var d=e.querySelector(i)??e.querySelector("option:not([disabled])");v=d&&We(d)}s(v)}),Za(()=>{var c=t();if(Ta(e,c,n),n&&c===void 0){var i=e.querySelector(":checked");i!==null&&(c=We(i),s(c))}e.__value=c,n=!1}),ps(e)}function We(e){return"__value"in e?e.__value:e.value}function ge(e,t,s=t){var n=Ba(),c=new WeakSet;ba(e,"input",i=>{var v=i?e.defaultValue:e.value;if(v=fa(e)?_a(v):v,s(v),Ue!==null&&c.add(Ue),n&&v!==(v=t())){var d=e.selectionStart,u=e.selectionEnd;e.value=v??"",u!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(u,e.value.length))}}),(ea&&e.defaultValue!==e.value||Pa(t)==null&&e.value)&&(s(fa(e)?_a(e.value):e.value),Ue!==null&&c.add(Ue)),Fa(()=>{var i=t();if(e===document.activeElement){var v=Ha??Ue;if(c.has(v))return}fa(e)&&i===_a(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function zt(e,t,s=t){ba(e,"change",n=>{var c=n?e.defaultChecked:e.checked;s(c)}),(ea&&e.defaultChecked!==e.checked||Pa(t)==null)&&s(e.checked),Fa(()=>{var n=t();e.checked=!!n})}function fa(e){var t=e.type;return t==="number"||t==="range"}function _a(e){return e===""?null:+e}function js(e,t){Ja(window,["resize"],()=>Qa(()=>t(window[e])))}function ys(e){var t=$a(0);return function(){return arguments.length===1?(h(t,o(t)+1),arguments[0]):(o(t),e())}}function ws(e,t){throw new Ya(e,t)}function Ds({params:e}){const t=e.design;if(Object.keys(pa).includes(t))return{pageDef:pa[t],allLink:Wa};ws(404,"Design undefined!")}const Nr=Object.freeze(Object.defineProperty({__proto__:null,load:Ds},Symbol.toStringTag,{value:"Module"})),H=se({});function Ra(e,t,s){if(Object.keys(H).includes(e)){const c=H[e],i=Object.keys(c);for(const v of Object.keys(t))i.includes(v)?s&&(c[v]=t[v]):c[v]=t[v];H[e]=c}else H[e]=t}function zs(e){const t=e.pDef.partName,s={};for(const n of e.pDef.params)s[n.name]=n.init;Ra(t,s,!1)}function Ls(e,t){t(!1)}var Ss=U('<aside class="backdrop svelte-sjxf1e"><div class="dialog svelte-sjxf1e"><button class="svelte-sjxf1e"><img/></button></div></aside>');function Ua(e,t){ft(t,!0);let s=St(t,"modalOpen",15);var n=Ye(),c=Lt(n);{var i=v=>{var d=Ss(),u=r(d),p=r(u);p.__click=[Ls,s];var f=r(p);a(p),a(u),a(d),tt(()=>{Z(f,"src",t.svgPath),Z(f,"alt",t.svgPath)}),O(v,d)};ae(c,v=>{s()&&v(i)})}O(e,n),_t()}Rt(["click"]);var Ns=(e,t,s)=>t(s),As=U('<button class="svelte-fxmnfh"><img class="svelte-fxmnfh"/></button>'),Cs=U('<section class="svelte-fxmnfh"><!> <!></section>');function Os(e,t){ft(t,!0);function s(f){const A=[];for(const N of Object.values(f.paramSvg))A.includes(N)||A.push(N);return A}let n=G(!1),c=G(""),i=bt(()=>s(t.pDef).map(f=>`${la}/pgdsvg/${f}`));function v(f){h(c,f,!0),h(n,!0)}var d=Cs(),u=r(d);Ua(u,{get svgPath(){return o(c)},get modalOpen(){return o(n)},set modalOpen(f){h(n,f,!0)}});var p=l(u,2);Ot(p,16,()=>o(i),f=>f,(f,A)=>{var N=As();N.__click=[Ns,v,A];var x=r(N);a(N),tt(()=>{Z(x,"src",A),Z(x,"alt",A)}),O(f,N)}),a(d),O(e,d),_t()}Rt(["click"]);function Ps(e,t){t(!1)}function Fs(e,t,s){t.okFunc(),s(!1)}var Ms=U('<aside class="backdrop svelte-weruk7"><div><article class="question svelte-weruk7"><!></article> <footer class="svelte-weruk7"><button class="cancel svelte-weruk7">Cancel</button> <button class="ok svelte-weruk7"> </button></footer></div></aside>');function Xe(e,t){ft(t,!0);let s=St(t,"okName",3,"Ok"),n=St(t,"modalOpen",15),c=St(t,"sizeLarge",3,!1);var i=Ye(),v=Lt(i);{var d=u=>{var p=Ms(),f=r(p);let A;var N=r(f),x=r(N);ms(x,()=>t.children),a(N);var _=l(N,2),I=r(_);I.__click=[Ps,n];var T=l(I,2);T.__click=[Fs,t,n];var Q=r(T,!0);a(T),a(_),a(f),a(p),tt(M=>{A=pt(f,1,"dialog svelte-weruk7",null,A,M),w(Q,s())},[()=>({sizeLarge:c()})]),O(u,p)};ae(v,u=>{n()&&u(d)})}O(e,i),_t()}Rt(["click"]);function Ts(e,t,s,n){for(const c of t())o(s)[c]=o(n)}var Rs=(e,t)=>{h(t,!0)},Us=U('<p class="diagItem svelte-12dj9tj"> </p>'),Is=U('<p class="diagTitle svelte-12dj9tj">Do you really want to delete the following localStorage keys?</p> <!>',1),Xs=(e,t,s)=>t(s),Ws=U('<tr class="svelte-12dj9tj"><td><input type="checkbox"/></td><td class="svelte-12dj9tj"><button class="svelte-12dj9tj"> </button></td><td> </td></tr>'),Ys=U('<div class="deleteKeys svelte-12dj9tj"><button class="svelte-12dj9tj">Delete</button> <!> <table class="svelte-12dj9tj"><thead class="svelte-12dj9tj"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-12dj9tj"></tbody></table></div>');function Ia(e,t){ft(t,!0);let s=St(t,"storeName",15),n=St(t,"localKeys",15),c=G(se({})),i=G(!1),v=G(!1);function d(){let S=[];const y=new RegExp(`^${t.pageName}_`);return S=Object.keys(window.localStorage).filter(q=>y.test(q)).map(q=>q.replace(y,"")),S.sort(),S}n(d());function u(S){s(S)}function p(S){let y={};for(const V of S){let q="";const J=`${t.pageName}_${V}`,E=window.localStorage.getItem(J);E!==null&&(q=JSON.parse(E).lastModif),y[V]=q}return y}let f=bt(()=>p(n()));function A(S){let y={};for(const V of S)y[V]=!1;return y}h(c,A(n()),!0);function N(){for(const S of n())if(o(c)[S]){const y=`${t.pageName}_${S}`;window.localStorage.removeItem(y)}h(i,!1),n(d())}var x=Ys(),_=r(x);_.__click=[Rs,v];var I=l(_,2);Xe(I,{okName:"Confirm",okFunc:N,get modalOpen(){return o(v)},set modalOpen(S){h(v,S,!0)},children:(S,y)=>{var V=Is(),q=l(Lt(V),2);Ot(q,16,n,J=>J,(J,E)=>{var at=Ye(),dt=Lt(at);{var rt=K=>{var ut=Us(),gt=r(ut,!0);a(ut),tt(()=>w(gt,E)),O(K,ut)};ae(dt,K=>{o(c)[E]&&K(rt)})}O(J,at)}),O(S,V)},$$slots:{default:!0}});var T=l(I,2),Q=r(T),M=l(r(Q)),B=r(M),ct=r(B);lt(ct),ct.__change=[Ts,n,c,i],a(B),Dt(2),a(M),a(Q);var it=l(Q);Ot(it,20,n,S=>S,(S,y)=>{var V=Ws(),q=r(V),J=r(q);lt(J),a(q);var E=l(q),at=r(E);at.__click=[Xs,u,y];var dt=r(at,!0);a(at),a(E);var rt=l(E),K=r(rt,!0);a(rt),a(V),tt(()=>{w(dt,y),w(K,o(f)[y])}),zt(J,()=>o(c)[y],ut=>o(c)[y]=ut),O(S,V)}),a(it),a(T),a(x),zt(ct,()=>o(i),S=>h(i,S)),O(e,x),_t()}Rt(["click","change"]);var Vs=U('<p class="warnMsg svelte-1rkdwo"> </p>'),Zs=U('<!> <div class="svelte-1rkdwo"><label for="storName" class="svelte-1rkdwo">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1rkdwo"/> <!></div>',1);function qs(e,t){ft(t,!0);let s=St(t,"storeName",15),n=G(se([]));function c(N){const x=/[-:]/g,_=/\..*$/,I=new Date().toISOString().replace(x,"").replace(_,"").replace("T","_");return`${N}_${I}`}s(c(t.pageName));let i=bt(()=>o(n).includes(s()));var v=Zs(),d=Lt(v);Ia(d,{get pageName(){return t.pageName},get storeName(){return s()},set storeName(N){s(N)},get localKeys(){return o(n)},set localKeys(N){h(n,N,!0)}});var u=l(d,2),p=l(r(u),2);lt(p);var f=l(p,2);{var A=N=>{var x=Vs(),_=r(x);a(x),tt(()=>w(_,`Warning: name ${s()??""} already used`)),O(N,x)};ae(f,N=>{o(i)&&N(A)})}a(u),ge(p,s),O(e,v),_t()}var Es=U('<!> <div class="svelte-1ozd0ey"><label for="storName" class="svelte-1ozd0ey">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-1ozd0ey"/></div>',1);function Ks(e,t){ft(t,!0);let s=St(t,"storeName",15),n=G(se([]));function c(p){let f=s();return!p.includes(f)&&(p.length>0?f=p[0]:f=""),f}ga(()=>{s(c(o(n)))});var i=Es(),v=Lt(i);Ia(v,{get pageName(){return t.pageName},get storeName(){return s()},set storeName(p){s(p)},get localKeys(){return o(n)},set localKeys(p){h(n,p,!0)}});var d=l(v,2),u=l(r(d),2);lt(u),a(d),tt(()=>aa(u,s())),O(e,i),_t()}const j=se({dLayers:as(),zAdjust:es(),canvasZWidth:0});var Gs=U('<canvas class="mini svelte-z8e4tz"></canvas>');function Ca(e,t){ft(t,!0);const s=200,n=.6;let c;function i(u,p,f,A){const N=ss(A);N.ruler=!1;let x;if(c){const _=c.getContext("2d");_.clearRect(0,0,_.canvas.width,_.canvas.height);const I=_.canvas.width;try{t.full?x=u.getAdjustFull(_.canvas.width,_.canvas.height):x=ls(f,I,p),u.draw(_,x,N)}catch(T){console.log(T)}}}ga(()=>{i(t.pFig,j.zAdjust,j.canvasZWidth,j.dLayers)});function v(u){const p=u.offsetX,f=u.offsetY,A=c.getContext("2d"),N=A.canvas.width/2,x=A.canvas.height/2;if(u.button===0){let _=1;p>N&&(_+=1*n),f>x&&(_+=2*n),A.canvas.width=_*s,A.canvas.height=_*s,i(t.pFig,j.zAdjust,j.canvasZWidth,j.dLayers)}}var d=Gs();Z(d,"width",s),Z(d,"height",s),d.__click=v,sa(d,u=>c=u,()=>c),O(e,d),_t()}Rt(["click"]);function Bs(e,t){const s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),s.setAttribute("download",e),s.click(),s.remove()}function Hs(e,t,s){const n=/[-:]/g,c=/\..*$/,i=new Date().toISOString().replace(n,"").replace(c,"").replace("T","_");return xa(i,e,t,s)}function ka(e,t,s){const n=/[-:]/g,c=/\..*$/,i=new Date().toISOString().replace(n,"").replace(c,"").replace("T","_"),v=`px_${e}_${i}.json`,d=xa(i,e,t,s);Bs(v,d)}function Js(e,t,s){const n=new URL(e),c=2e3;let i=n.toString().length;for(const v of Object.keys(t)){const d=t[v].toString(),u=2+v.length+d.length;n.searchParams.append(encodeURIComponent(v),encodeURIComponent(d)),i+=u}return i>=c&&console.log(`warn547: generateUrl: strLength ${i} larger than strLengthLimit ${c}`),n.toString()}const Qs=Symbol();class $s extends URLSearchParams{#t=G(0);#s=el();#e=!1;#a(){if(!this.#s||this.#e)return;this.#e=!0;const t=this.toString();this.#s.search=t&&`?${t}`,this.#e=!1}[Qs](t){if(!this.#e){this.#e=!0;for(const s of[...super.keys()])super.delete(s);for(const[s,n]of t)super.append(s,n);Ie(this.#t),this.#e=!1}}append(t,s){super.append(t,s),this.#a(),Ie(this.#t)}delete(t,s){var n=super.has(t,s);super.delete(t,s),n&&(this.#a(),Ie(this.#t))}get(t){return o(this.#t),super.get(t)}getAll(t){return o(this.#t),super.getAll(t)}has(t,s){return o(this.#t),super.has(t,s)}keys(){return o(this.#t),super.keys()}set(t,s){var n=super.getAll(t).join("");super.set(t,s),n!==super.getAll(t).join("")&&(this.#a(),Ie(this.#t))}sort(){super.sort(),this.#a(),Ie(this.#t)}toString(){return o(this.#t),super.toString()}values(){return o(this.#t),super.values()}entries(){return o(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return o(this.#t),super.size}}let tl=null;function el(){return tl}function al(e,t){if(e.target){const s=e.target.files;s&&t(s[0])}}function sl(e,t,s,n){h(t,s(),!0),h(n,!0)}function ll(e,t){h(t,!0)}function rl(e,t){h(t,!0)}function nl(e,t){h(t,!1)}var ol=(e,t)=>{h(t,!0)},cl=(e,t)=>{h(t,!0)},il=(e,t,s)=>t(o(s).name),vl=U('<input type="number" class="input-number svelte-jonk14"/> <input type="range" class="svelte-jonk14"/>',1),dl=U("<option> </option>"),ul=U("<select></select>"),fl=U("<option> </option>"),_l=U("<select></select>"),ml=U('<tr><td class="svelte-jonk14"> </td><td class="svelte-jonk14"><button class="svelte-jonk14"> </button></td><td class="svelte-jonk14"><!></td><td> </td><td> </td><td class="svelte-jonk14"> </td><td class="svelte-jonk14"> </td><td> </td></tr>'),bl=U('<tbody class="svelte-jonk14"><tr class="separator svelte-jonk14"><td class="svelte-jonk14"> </td><td class="svelte-jonk14"> </td><td class="svelte-jonk14"><label class="svelte-jonk14"><input type="checkbox" class="svelte-jonk14"/> <span class="svelte-jonk14"></span></label></td></tr></tbody> <tbody></tbody>',1),gl=(e,t)=>{h(t,!0)},xl=U('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-jonk14"> </p>',1),kl=U('<section class="svelte-jonk14"><h2 class="svelte-jonk14">Parameters</h2> <main class="svelte-jonk14"><label for="loadFParams" class="fileUpload svelte-jonk14">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-jonk14"/> <button class="svelte-jonk14">Set Params Default</button> <button class="svelte-jonk14">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-jonk14"><thead class="svelte-jonk14"><tr class="svelte-jonk14"><td class="svelte-jonk14">&#35;</td><td class="svelte-jonk14">Parameter name</td><td class="svelte-jonk14">Value<span class="svelte-jonk14"><button class="svelte-jonk14">&minus;</button><button class="svelte-jonk14">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-jonk14">Min</td><td class="svelte-jonk14">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-jonk14"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-jonk14">Save Parameters to File</button> <button class="svelte-jonk14">Save Parameters as URL</button> <button class="svelte-jonk14">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-jonk14"><img class="svelte-jonk14"/></button> <div class="mini-canvas svelte-jonk14"><!></div> <div class="mini-canvas svelte-jonk14"><!></div></section>');function hl(e,t){ft(t,!0);let s=G(""),n=G(!1),c=G(""),i=G(!1),v=G(!1),d=G(!1),u=G(!1),p=G(!1),f=G(""),A=G(""),N=G(""),x=G(se(E(t.pDef.params[0].name))),_=G(!1),I=G(se(rt(dt(t.pDef.params))));Oa(()=>{h(x,E(t.pDef.params[0].name),!0),h(I,rt(dt(t.pDef.params)),!0)});function T(b,k){let D="",R=!1;b!==t.pDef.partName&&(D+=`warn361: read partName: '${b}'  expected partName: '${t.pDef.partName}'
`,R=!0);let $=0,vt=0,Ft=0;const fe=[];for(const kt of t.pDef.params)fe.push(kt.name),Object.hasOwn(k,kt.name)?($+=1,H[t.pDef.partName][kt.name]===k[kt.name]?Ft+=1:H[t.pDef.partName][kt.name]=k[kt.name]):vt+=1;let yt=0;for(const kt of Object.keys(k))fe.includes(kt)||(yt+=1,D+=`warn363: parameter ${kt} not in the scope of the design (${yt})
`);const Bt=yt>0,Ht=new Date().toLocaleTimeString();return D+=`Params loaded at ${Ht} :`,D+=` def-nb: ${Object.keys(t.pDef.params).length}`,D+=`, cover-nb: ${$}, uncover-nb: ${vt}
`,D+=` load-nb: ${Object.keys(k).length}`,D+=`, equal-nb: ${Ft}, changed-nb: ${$-Ft}`,D+=`, out-of-scope: ${yt}`,[D,R||Bt]}async function Q(b){try{const k=await fetch(b);if(!k.ok)throw`err627: error while fetching ${b}`;const D=await k.text(),[R]=wa(D);($=>{var vt=Qe($,2);h(c,vt[0],!0),h(i,vt[1],!0)})(T(R.partName,R.pVal)),h(s,R.comment,!0)}catch(k){let D=`err223: error by fetching px file
`;D+=k,h(c,D,!0),h(i,!0)}}async function M(){{const b=new $s(La.url.search),k="pxUrl";if(b.has(k)){const R=b.get(k);b.delete(k),R?await Q(R):(h(c,`err123: error by parsing URL-search-params
`),h(i,!0))}const D={};for(const[R,$]of b){const vt=Number($);isNaN(vt)||(D[R]=vt)}Object.keys(D).length>0&&(R=>{var $=Qe(R,2);h(c,$[0],!0),h(i,$[1],!0)})(T(t.pDef.partName,D))}}M();function B(b){try{const[k]=wa(b);(D=>{var R=Qe(D,2);h(c,R[0],!0),h(i,R[1],!0)})(T(k.partName,k.pVal)),h(s,k.comment,!0)}catch(k){let D=`err723: error by parsing parameter file
`;D+=k,h(c,D,!0),h(i,!0)}}async function ct(b){const k=await b.text();B(k)}function it(){ka(t.pDef.partName,H[t.pDef.partName],o(s))}function S(){const b={};for(const k of t.pDef.params)b[k.name]=k.init;(k=>{var D=Qe(k,2);h(c,D[0],!0),h(i,D[1],!0)})(T(t.pDef.partName,b))}function y(){if(o(f)!==void 0&&o(f)!==""){const b=`${t.pDef.partName}_${o(f)}`;{const k=window.localStorage.getItem(b);k===null?(h(c,`Warn157: localStorage key ${b} is null`),h(i,!0)):B(k)}}else h(c,"Warn239: No valid name for loading from localStorage!"),h(i,!0)}function V(){if(o(A)!==void 0&&o(A)!==""){const b=`${t.pDef.partName}_${o(A)}`,k=/\..*$/,D=new Date().toISOString().replace(k,""),R=xa(D,t.pDef.partName,H[t.pDef.partName],o(s));window.localStorage.setItem(b,R)}else console.log("Warn639: No valid name for writing to localStorage!")}function q(){return Js(La.url.href,H[t.pDef.partName]).toString()}function J(){}function E(b){let k=`${la}/pgdsvg/default_param_blank.svg`;return Object.keys(t.pDef.paramSvg).includes(b)&&(k=`${la}/pgdsvg/${t.pDef.paramSvg[b]}`),k}function at(b){h(x,E(b),!0)}function dt(b){const k=[];let R={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},$=0;for(const vt of b)vt.pType===$e.eSectionSeparator?(k.push(R),$+=1,R={sectionName:vt.name,sectionID:`g${$}${vt.name}`,sectionVisCollapse:!0,params:[]}):R.params.push(vt);return k.push(R),k}function rt(b){const k={};for(const D of b)k[D.sectionID]=D.sectionVisCollapse;return k}let K=bt(()=>dt(t.pDef.params)),ut=bt(()=>o(n)?2:4),gt=bt(()=>o(n)?2:3),mt=bt(()=>o(n)?50:70);var jt=kl(),m=l(r(jt),2),z=l(r(m),2);z.__change=[al,ct];var C=l(z,2);C.__click=[ol,v];var Y=l(C,2);Y.__click=[cl,d];var xt=l(Y,2);Xe(xt,{okName:"Overwrite Parameters",okFunc:S,get modalOpen(){return o(v)},set modalOpen(b){h(v,b,!0)},children:(b,k)=>{Dt();var D=ja("Load the default parameters ?");O(b,D)},$$slots:{default:!0}});var Ut=l(xt,2);Xe(Ut,{okName:"Load Parameters",okFunc:y,get modalOpen(){return o(d)},set modalOpen(b){h(d,b,!0)},children:(b,k)=>{Ks(b,{get pageName(){return t.pDef.partName},get storeName(){return o(f)},set storeName(D){h(f,D,!0)}})},$$slots:{default:!0}});var Nt=l(Ut,2);ma(Nt);let qt;var At=l(Nt,2),Pt=r(At),Wt=r(Pt),Yt=l(r(Wt),2),le=l(r(Yt)),xe=r(le);xe.__click=[rl,n];var ra=l(xe);ra.__click=[nl,n],a(le),a(Yt);var ke=l(Yt);let re;var ne=l(ke);let Ve;var he=l(ne,3);let Ze;a(Wt),a(Pt);var pe=l(Pt);Ot(pe,19,()=>o(K),b=>b.sectionName,(b,k,D)=>{var R=bl(),$=Lt(R),vt=r($),Ft=r(vt),fe=r(Ft,!0);a(Ft);var yt=l(Ft),Bt=r(yt,!0);a(yt);var Ht=l(yt),Jt=r(Ht),kt=r(Jt);lt(kt),Dt(2),a(Jt),a(Ht),a(vt),a($);var Qt=l($,2);let Ge;Ot(Qt,23,()=>o(k).params,It=>It.name,(It,W,ze)=>{var Et=ml();let Be;var $t=r(Et),oa=r($t);a($t);var te=l($t),Le=r(te);Le.__click=[il,at,W];var He=r(Le,!0);a(Le),a(te);var Se=l(te),Ne=r(Se);{var Ae=wt=>{var Mt=vl(),Ct=Lt(Mt);lt(Ct);var Tt=l(Ct,2);lt(Tt),tt(()=>{Z(Ct,"min",o(W).min),Z(Ct,"max",o(W).max),Z(Ct,"step",o(W).step),Z(Tt,"min",o(W).min),Z(Tt,"max",o(W).max),Z(Tt,"step",o(W).step)}),ge(Ct,()=>H[t.pDef.partName][o(W).name],g=>H[t.pDef.partName][o(W).name]=g),ge(Tt,()=>H[t.pDef.partName][o(W).name],g=>H[t.pDef.partName][o(W).name]=g),O(wt,Mt)},ca=wt=>{var Mt=Ye(),Ct=Lt(Mt);{var Tt=P=>{var F=ul();Ot(F,22,()=>["Off","On"],L=>L,(L,st,Xt)=>{var et=dl(),ht=r(et,!0);a(et);var ot={};tt(()=>{w(ht,st),ot!==(ot=o(Xt))&&(et.value=(et.__value=o(Xt))??"")}),O(L,et)}),a(F),Aa(F,()=>H[t.pDef.partName][o(W).name],L=>H[t.pDef.partName][o(W).name]=L),O(P,F)},g=P=>{var F=Ye(),L=Lt(F);{var st=et=>{var ht=_l();Ot(ht,22,()=>o(W).dropdown,ot=>ot,(ot,Vt,Gt)=>{var Zt=fl(),Xa=r(Zt,!0);a(Zt);var ha={};tt(()=>{w(Xa,Vt),ha!==(ha=o(Gt))&&(Zt.value=(Zt.__value=o(Gt))??"")}),O(ot,Zt)}),a(ht),Aa(ht,()=>H[t.pDef.partName][o(W).name],ot=>H[t.pDef.partName][o(W).name]=ot),O(et,ht)},Xt=et=>{var ht=ja("unknown");O(et,ht)};ae(L,et=>{o(W).pType===$e.eDropdown?et(st):et(Xt,!1)},!0)}O(P,F)};ae(Ct,P=>{o(W).pType===$e.eCheckbox?P(Tt):P(g,!1)},!0)}O(wt,Mt)};ae(Ne,wt=>{o(W).pType===$e.eNumber?wt(Ae):wt(ca,!1)})}a(Se);var Kt=l(Se);let Je;var Ce=r(Kt,!0);a(Kt);var _e=l(Kt);let Oe;var ia=r(_e,!0);a(_e);var me=l(_e),Pe=r(me,!0);a(me);var Fe=l(me),Me=r(Fe,!0);a(Fe);var Te=l(Fe);let Re;var va=r(Te,!0);a(Te),a(Et),tt((wt,Mt,Ct,Tt)=>{Be=pt(Et,1,"svelte-jonk14",null,Be,wt),w(oa,`${o(D)+1}.${o(ze)+1}`),w(He,o(W).name),Je=pt(Kt,1,"svelte-jonk14",null,Je,Mt),w(Ce,o(W).unit),Oe=pt(_e,1,"svelte-jonk14",null,Oe,Ct),w(ia,o(W).init),w(Pe,o(W).min),w(Me,o(W).max),Re=pt(Te,1,"svelte-jonk14",null,Re,Tt),w(va,o(W).step)},[()=>({changed:H[t.pDef.partName][o(W).name]!==o(W).init}),()=>({hideColumn:o(n)}),()=>({hideColumn:o(n)}),()=>({hideColumn:o(n)})]),O(It,Et)}),a(Qt),tt(It=>{w(fe,o(D)+1),Z(yt,"colspan",o(ut)),w(Bt,o(k).sectionName),Z(Ht,"colspan",o(gt)),Ge=pt(Qt,1,"svelte-jonk14",null,Ge,It)},[()=>({collaps:o(I)[o(k).sectionID]})]),zt(kt,()=>o(I)[o(k).sectionID],It=>o(I)[o(k).sectionID]=It),O(b,R)}),a(At);var je=l(At,2),oe=l(r(je),2);lt(oe),a(je);var qe=l(je,2);qe.__click=it;var ye=l(qe,2);ye.__click=[sl,N,q,u];var ce=l(ye,2);ce.__click=[gl,p];var ie=l(ce,2);Xe(ie,{okName:"Done",okFunc:J,sizeLarge:!0,get modalOpen(){return o(u)},set modalOpen(b){h(u,b,!0)},children:(b,k)=>{var D=xl(),R=l(Lt(D),2),$=r(R,!0);a(R),tt(()=>w($,o(N))),O(b,D)},$$slots:{default:!0}});var na=l(ie,2);Xe(na,{okName:"Save into localStorage",okFunc:V,get modalOpen(){return o(p)},set modalOpen(b){h(p,b,!0)},children:(b,k)=>{qs(b,{get pageName(){return t.pDef.partName},get storeName(){return o(A)},set storeName(D){h(A,D,!0)}})},$$slots:{default:!0}}),a(m);var ve=l(m,2);Ua(ve,{get svgPath(){return o(x)},get modalOpen(){return o(_)},set modalOpen(b){h(_,b,!0)}});var de=l(ve,2);de.__click=[ll,_];var ue=r(de);a(de);var we=l(de,2),Ee=r(we);Ca(Ee,{get pFig(){return t.pFig},full:!0}),a(we);var Ke=l(we,2),De=r(Ke);Ca(De,{get pFig(){return t.pFig},full:!1}),a(Ke),a(jt),tt((b,k,D,R)=>{aa(Nt,o(c)),qt=pt(Nt,1,"svelte-jonk14",null,qt,b),re=pt(ke,1,"svelte-jonk14",null,re,k),Ve=pt(ne,1,"svelte-jonk14",null,Ve,D),Ze=pt(he,1,"svelte-jonk14",null,Ze,R),Z(oe,"size",o(mt)),Z(ue,"src",o(x)),Z(ue,"alt",o(x))},[()=>({colorWarn:o(i)}),()=>({hideColumn:o(n)}),()=>({hideColumn:o(n)}),()=>({hideColumn:o(n)})]),ge(oe,()=>o(s),b=>h(s,b)),O(e,jt),_t()}Rt(["change","click"]);var pl=U('<nav class="svelte-1lpxlzz"><button class="svelte-1lpxlzz">0</button> <button class="svelte-1lpxlzz">&lt-</button> <button class="svelte-1lpxlzz">|&lt</button> <button class="svelte-1lpxlzz">||</button> <button class="svelte-1lpxlzz">&gt|</button> <button class="svelte-1lpxlzz">-&gt</button> <input type="range" min="0" class="svelte-1lpxlzz"/> <input type="number" min="0" class="svelte-1lpxlzz"/></nav>');function jl(e,t){ft(t,!0);let s=St(t,"tMax",3,10),n=St(t,"tStep",3,.1),c=St(t,"tUpdate",3,500),i=St(t,"simTime",15,0),v=null,d=0,u;const p=4;function f(){v!==null&&(clearInterval(v),v=null)}function A(){u<0&&i()<=0?i(s()):u>0&&i()>=s()?i(0):i(i()+u)}function N(){const at=c()/2**(Math.abs(d)-1);u=d<0?-n():n(),v=setInterval(A,at)}function x(){f(),i(0),d=0}function _(){f(),d=0,u=-n(),A()}function I(){f(),d=0,u=n(),A()}function T(){f(),d=Math.max(d-1,-p),N()}function Q(){f(),d=Math.min(d+1,p),N()}function M(){f(),d=0}gs(()=>{f()});var B=pl(),ct=r(B);ct.__click=x;var it=l(ct,2);it.__click=T;var S=l(it,2);S.__click=_;var y=l(S,2);y.__click=M;var V=l(y,2);V.__click=I;var q=l(V,2);q.__click=Q;var J=l(q,2);lt(J);var E=l(J,2);lt(E),a(B),tt(()=>{Z(J,"max",s()),Z(J,"step",n()),Z(E,"max",s()),Z(E,"step",n())}),ge(J,i),ge(E,i),O(e,B),_t()}Rt(["click"]);var yl=(e,t)=>t.zoomClick("zoomInit"),wl=(e,t)=>t.zoomClick("zoomIn"),Dl=(e,t)=>t.zoomClick("zoomOut"),zl=(e,t)=>t.zoomClick("moveLeft"),Ll=(e,t)=>t.zoomClick("moveRight"),Sl=(e,t)=>t.zoomClick("moveUp"),Nl=(e,t)=>t.zoomClick("moveDown"),Al=U('<nav class="svelte-et5lcr"><button aria-labelledby="zoomInit" class="svelte-et5lcr"><div class="zero svelte-et5lcr"></div></button><button aria-labelledby="zoomIn" class="svelte-et5lcr"><div class="zoomin svelte-et5lcr"></div></button><button aria-labelledby="zoomOut" class="svelte-et5lcr"><div class="zoomout svelte-et5lcr"></div></button><button aria-labelledby="moveLeft" class="svelte-et5lcr"><div class="arrowleft svelte-et5lcr"></div></button><button aria-labelledby="moveRight" class="svelte-et5lcr"><div class="arrowright svelte-et5lcr"></div></button><button aria-labelledby="moveUp" class="svelte-et5lcr"><div class="arrowup svelte-et5lcr"></div></button><button aria-labelledby="moveDown" class="svelte-et5lcr"><div class="arrowdown svelte-et5lcr"></div></button></nav>');function Cl(e,t){ft(t,!0);var s=Al(),n=r(s);n.__click=[yl,t];var c=l(n);c.__click=[wl,t];var i=l(c);i.__click=[Dl,t];var v=l(i);v.__click=[zl,t];var d=l(v);d.__click=[Ll,t];var u=l(d);u.__click=[Sl,t];var p=l(u);p.__click=[Nl,t],a(s),O(e,s),_t()}Rt(["click"]);var X=ys(()=>j),Ol=U('<div class="svelte-1rsbkj"><label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>main part</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>main skeleton</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>second parts</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>second skeletons</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>dynamics</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>ruler</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>frame of reference</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>points</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>lines</label> <label class="svelte-1rsbkj"><input type="checkbox" class="svelte-1rsbkj"/>vectors</label></div>');function Pl(e,t){ft(t,!1),bs();var s=Ol(),n=r(s),c=r(n);lt(c),Dt(),a(n);var i=l(n,2),v=r(i);lt(v),Dt(),a(i);var d=l(i,2),u=r(d);lt(u),Dt(),a(d);var p=l(d,2),f=r(p);lt(f),Dt(),a(p);var A=l(p,2),N=r(A);lt(N),Dt(),a(A);var x=l(A,2),_=r(x);lt(_),Dt(),a(x);var I=l(x,2),T=r(I);lt(T),Dt(),a(I);var Q=l(I,2),M=r(Q);lt(M),Dt(),a(Q);var B=l(Q,2),ct=r(B);lt(ct),Dt(),a(B);var it=l(B,2),S=r(it);lt(S),Dt(),a(it),a(s),zt(c,()=>X().dLayers.main,y=>X(X().dLayers.main=y)),zt(v,()=>X().dLayers.mainB,y=>X(X().dLayers.mainB=y)),zt(u,()=>X().dLayers.second,y=>X(X().dLayers.second=y)),zt(f,()=>X().dLayers.secondB,y=>X(X().dLayers.secondB=y)),zt(N,()=>X().dLayers.dynamics,y=>X(X().dLayers.dynamics=y)),zt(_,()=>X().dLayers.ruler,y=>X(X().dLayers.ruler=y)),zt(T,()=>X().dLayers.refframe,y=>X(X().dLayers.refframe=y)),zt(M,()=>X().dLayers.points,y=>X(X().dLayers.points=y)),zt(ct,()=>X().dLayers.lines,y=>X(X().dLayers.lines=y)),zt(S,()=>X().dLayers.vectors,y=>X(X().dLayers.vectors=y)),O(e,s),_t()}var Fl=U('<section class="svelte-1lstqwr"><!> <div class="rack svelte-1lstqwr"><canvas class="full svelte-1lstqwr"></canvas> <!></div> <div class="rack svelte-1lstqwr"><canvas class="zoom svelte-1lstqwr"></canvas> <!></div></section>');function Ml(e,t){ft(t,!0);let s=St(t,"simTime",15,0);const n=400,c=1200;let i=G(n),v,d,u;function p(m,z){if(v){const C=v.getContext("2d");C.clearRect(0,0,C.canvas.width,C.canvas.height);try{u=m.getAdjustFull(C.canvas.width,C.canvas.height),m.draw(C,u,z)}catch(Y){console.log(Y)}}}function f(m,z,C){if(d){const Y=d.getContext("2d");Y.clearRect(0,0,Y.canvas.width,Y.canvas.height);try{(z===void 0||z.init===0)&&(z=m.getAdjustZoom(Y.canvas.width,Y.canvas.height)),m.draw(Y,z,C)}catch(xt){console.log(xt)}}}function A(){const m=v.getContext("2d"),z=d.getContext("2d"),C=Math.min(Math.max(.4*o(i),n),c);m.canvas.width=C,m.canvas.height=C,z.canvas.width=C,z.canvas.height=C,j.canvasZWidth=C,j.zAdjust.init===0&&(j.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height))}function N(){A(),p(t.pFig,j.dLayers),f(t.pFig,j.zAdjust,j.dLayers)}function x(m,z,C){p(m,C),f(m,z,C)}xs(()=>{A()}),ga(()=>{x(t.pFig,j.zAdjust,j.dLayers)});function _(m){const z=d.getContext("2d");switch(m){case"zoomInit":j.zAdjust=t.pFig.getAdjustZoom(z.canvas.width,z.canvas.height);break;case"zoomIn":j.zAdjust=ta(.7,j.zAdjust);break;case"zoomOut":j.zAdjust=ta(1.3,j.zAdjust);break;case"moveLeft":j.zAdjust.xMin+=-.2*j.zAdjust.xyDiff;break;case"moveRight":j.zAdjust.xMin+=.2*j.zAdjust.xyDiff;break;case"moveUp":j.zAdjust.yMin+=.2*j.zAdjust.xyDiff;break;case"moveDown":j.zAdjust.yMin+=-.2*j.zAdjust.xyDiff;break;default:console.log(`ERR423: ${m} has no case!`)}f(t.pFig,j.zAdjust,j.dLayers)}const I=3e3,T=10,Q=3;let M={timestamp:0,offsetX:0,offsetY:0};function B(m){m.button===0&&(M.timestamp=Date.now(),M.offsetX=m.offsetX,M.offsetY=m.offsetY)}function ct(m){if(m.button===0)if(Date.now()-M.timestamp<I){const z=Math.abs(M.offsetX-m.offsetX),C=Math.abs(M.offsetY-m.offsetY);if(z<T&&C<T){const[Y,xt]=ee(m.offsetX,m.offsetY,u);j.zAdjust=rs(Y,xt,j.zAdjust),x(t.pFig,j.zAdjust,j.dLayers)}if(z>T&&C>T){const Y=z/C,xt=1/Y;if(Y<Q&&xt<Q){const[Ut,Nt]=ee(m.offsetX,m.offsetY,u),[qt,At]=ee(M.offsetX,M.offsetY,u),Wt=d.getContext("2d").canvas.width;j.zAdjust=ns(Ut,Nt,qt,At,Wt,Wt),x(t.pFig,j.zAdjust,j.dLayers)}}}else console.log(`Warn205: ignore ${m.offsetX} ${m.offsetY} because too slow`)}function it(m){if(v){const z=v.getContext("2d");if(m.buttons===1){const C=m.offsetX-M.offsetX,Y=m.offsetY-M.offsetY;p(t.pFig,j.dLayers),z.beginPath(),z.rect(M.offsetX,M.offsetY,C,Y),z.strokeStyle=da.mouse,z.stroke()}if(j.dLayers.ruler){const[C,Y]=ee(m.offsetX,m.offsetY,u);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=da.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}}let S,y,V;function q(m){if(m.button===0){const[z,C]=ee(m.offsetX,m.offsetY,j.zAdjust);S=z,y=C,V=os(j.zAdjust)}}function J(m){if(m.buttons===1){const[z,C]=ee(m.offsetX,m.offsetY,V);j.zAdjust=cs(S,y,z,C,V),f(t.pFig,j.zAdjust,j.dLayers)}else if(j.dLayers.ruler&&d){const z=d.getContext("2d"),[C,Y]=ee(m.offsetX,m.offsetY,j.zAdjust);z.clearRect(5,5,200,25),z.font="15px Arial",z.fillStyle=da.ruler,z.fillText(`x: ${C.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}function E(m){m.preventDefault(),m.deltaY>0?j.zAdjust=ta(.7,j.zAdjust):j.zAdjust=ta(1.3,j.zAdjust),f(t.pFig,j.zAdjust,j.dLayers)}var at=Fl();ya("resize",ts,N);var dt=r(at);Pl(dt,{});var rt=l(dt,2),K=r(rt);Z(K,"width",n),Z(K,"height",n),K.__mousedown=B,K.__mouseup=ct,K.__mousemove=it,sa(K,m=>v=m,()=>v);var ut=l(K,2);jl(ut,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return s()},set simTime(m){s(m)}}),a(rt);var gt=l(rt,2),mt=r(gt);Z(mt,"width",n),Z(mt,"height",n),mt.__mousedown=q,mt.__mousemove=J,sa(mt,m=>d=m,()=>d);var jt=l(mt,2);Cl(jt,{zoomClick:_}),a(gt),a(at),js("innerWidth",m=>h(i,m,!0)),ya("wheel",mt,E),O(e,at),_t()}Rt(["mousedown","mouseup","mousemove"]);var Tl=(e,t,s)=>t(s),Rl=(e,t,s)=>t(s),Ul=U("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),Il=U('<li class="svelte-lzdpo0"><input type="checkbox" class="toggle svelte-lzdpo0"/> <label class="label svelte-lzdpo0"><div class="arrow svelte-lzdpo0"></div> </label> <button class="svelte-lzdpo0"> </button> <button class="svelte-lzdpo0">Export parameters</button> <div class="nested svelte-lzdpo0"><article class="svelte-lzdpo0"> <strong> </strong> </article> <table class="svelte-lzdpo0"><thead class="svelte-lzdpo0"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-lzdpo0"></tbody></table></div></li>'),Xl=U('<section class="svelte-lzdpo0"><h2 class="svelte-lzdpo0">Sub-designs <span class="svelte-lzdpo0"> </span></h2> <ol class="svelte-lzdpo0"></ol></section>');function Wl(e,t){ft(t,!0);const s=bt(()=>Object.keys(t.subD));async function n(x){const _=t.subD[x];Ra(_.partName,Da(_.dparam),!0);const I=`${la}${t.pLink[_.partName]}`;Va(I)}function c(x){const _=t.subD[x].partName,I=t.subD[x].dparam,T=`sub-design parameters of ${_} from ${t.origPartName}`;ka(_,Da(I),T)}function i(x){let _="[ ";return _+=`${be(ua(x[0]))}, `,_+=`${be(ua(x[1]))}, `,_+=`${be(ua(x[2]))} ]`,_}function v(x){let _="[ ";return _+=`${be(x[0])}, `,_+=`${be(x[1])}, `,_+=`${be(x[2])} ]`,_}function d(x){return x?"Yes":""}var u=Xl(),p=r(u),f=l(r(p)),A=r(f);a(f),a(p);var N=l(p,2);Ot(N,20,()=>o(s),x=>x,(x,_)=>{var I=Il(),T=r(I);lt(T),is(T,!1);var Q=l(T,2),M=l(r(Q));a(Q);var B=l(Q,2);B.__click=[Tl,n,_];var ct=r(B);a(B);var it=l(B,2);it.__click=[Rl,c,_];var S=l(it,2),y=r(S),V=r(y),q=l(V),J=r(q,!0);a(q);var E=l(q);a(y);var at=l(y,2),dt=l(r(at));Ot(dt,22,()=>Object.keys(t.subD[_].dparam),rt=>rt,(rt,K,ut)=>{var gt=Ul();let mt;var jt=r(gt),m=r(jt,!0);a(jt);var z=l(jt),C=r(z,!0);a(z);var Y=l(z),xt=r(Y,!0);a(Y);var Ut=l(Y),Nt=r(Ut),qt=r(Nt,!0);a(Nt),a(Ut);var At=l(Ut),Pt=r(At),Wt=r(Pt,!0);a(Pt),a(At),a(gt),tt((Yt,le)=>{mt=pt(gt,1,"svelte-lzdpo0",null,mt,Yt),w(m,o(ut)+1),w(C,K),w(xt,t.subD[_].dparam[K].val),w(qt,t.subD[_].dparam[K].init),w(Wt,le)},[()=>({changed:t.subD[_].dparam[K].chg}),()=>d(t.subD[_].dparam[K].chg)]),O(rt,gt)}),a(dt),a(at),a(S),a(I),tt((rt,K,ut)=>{Z(T,"id",`cb_${_??""}`),Z(Q,"for",`cb_${_??""}`),w(M,` ${_??""}`),w(ct,`Go to ${t.pLink[t.subD[_].partName]??""}`),w(V,`${rt??""} parameters of `),w(J,t.subD[_].partName),w(E,` with orientation ${K??""} (degree) at position
						${ut??""} (mm)`)},[()=>Object.keys(t.subD[_].dparam).length,()=>i(t.subD[_].orientation),()=>v(t.subD[_].position)]),O(x,I)}),a(N),a(u),tt(()=>w(A,`(Number of sub-instances: ${o(s).length??""})`)),O(e,u),_t()}Rt(["click"]);async function Yl(e,t){ka(t.pDef.partName,H[t.pDef.partName],"")}var Vl=(e,t,s)=>{h(t,s,!0)},Zl=U("<button> </button>"),ql=(e,t,s)=>{h(t,s)},El=(e,t,s)=>{t(Hs(s.pDef.partName,H[s.pDef.partName],""))},Kl=(e,t)=>{t("all",nt.eTXTLOG)},Gl=async(e,t)=>{await t("compute_log")},Bl=(e,t,s)=>{t(s,nt.eSVG)},Hl=async(e,t,s)=>{await t(`svg_${s}`)},Jl=U('<tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- svg</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr>'),Ql=(e,t)=>{t("all",nt.eSVGALL)},$l=async(e,t)=>{await t("allsvg")},tr=(e,t,s)=>{t(s,nt.eDXF)},er=async(e,t,s)=>{await t(`dxf_${s}`)},ar=U('<tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- dxf</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr>'),sr=(e,t)=>{t("all",nt.eDXFALL)},lr=async(e,t)=>{await t("alldxf")},rr=(e,t)=>{t("all",nt.ePAX)},nr=async(e,t)=>{await t("pax")},or=(e,t)=>{t("all",nt.eOPENSCAD)},cr=async(e,t)=>{await t("oscad")},ir=(e,t)=>{t("all",nt.eJSCAD)},vr=async(e,t)=>{await t("ojscad")},dr=(e,t)=>{t("all",nt.eFREECAD)},ur=async(e,t)=>{await t("freecad")},fr=async(e,t)=>{await t("zip")},_r=U('<!> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-8jmax4"><h2 class="svelte-8jmax4">Export</h2> <table class="svelte-8jmax4"><caption class="svelte-8jmax4">Output files</caption><thead class="svelte-8jmax4"><tr class="svelte-8jmax4"><th class="svelte-8jmax4">#</th><th class="svelte-8jmax4">Filename</th><th class="svelte-8jmax4">Type</th><th class="svelte-8jmax4">Preview</th><th class="svelte-8jmax4">Download</th></tr></thead><tbody class="svelte-8jmax4"><tr class="svelte-8jmax4"><td class="svelte-8jmax4">1</td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">0-params- pxJson</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4">2</td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">1-log- txtLog</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><!><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- svg</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><!><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">2d- dxf</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">4-pax- paxJson</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- scad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- jsCad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">5-script- pyFreecad</td><td class="svelte-8jmax4"><button class="svelte-8jmax4">preview</button></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr><tr class="svelte-8jmax4"><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4"> </td><td class="svelte-8jmax4">6-zip- zip</td><td class="svelte-8jmax4"></td><td class="svelte-8jmax4"><button class="svelte-8jmax4">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-8jmax4"><textarea readonly="" wrap="soft" class="svelte-8jmax4"></textarea> <button class="bback svelte-8jmax4">close - back - escape</button></dialog> <!></section>',1);function mr(e,t){ft(t,!0);const s="ParametrixAll";function n(g){let P=!0;const F=/warn/i;return g.search(F)<0&&(P=!1),P}function c(g,P){let F=P;if(g.length===0)console.log("warn404: Drawing has an empty face list");else{const L=g.slice();L.push(s),L.includes(F)||(F=g[0])}return F}function i(g,P){let F;const L=Object.keys(g),st=c(L,P);return L.includes(st)?F=g[st]:F=fs(g),F}let v=G(0),d=G(s);Oa(()=>{h(d,c(Object.keys(t.fgeom(0,H[t.pDef.partName]).fig),""),!0)});let u=bt(()=>t.fgeom(o(v),H[t.pDef.partName])),p=bt(()=>{const g=new Date().toLocaleTimeString();let P=`Geometry ${t.pDef.partName} computed at ${g}
`;return P+=o(u).logstr,P}),f=bt(()=>Object.keys(o(u).fig)),A=bt(()=>o(u).calcErr),N=bt(()=>n(o(u).logstr)),x=bt(()=>i(o(u).fig,o(d))),_=bt(()=>o(u).sub);function I(g,P){const F=document.createElement("a"),L=URL.createObjectURL(P);F.setAttribute("href",L),F.setAttribute("download",g),F.click(),F.remove(),URL.revokeObjectURL(L)}function T(g,P,F){const L=document.createElement("a"),st="data:"+F+";utf-8,"+encodeURIComponent(P);L.setAttribute("href",st),L.setAttribute("download",g),L.click(),L.remove()}function Q(){const g=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(g,"").replace(P,"").replace("T","_")}async function M(g){const P=/^svg_/,F=/^dxf_/;let L=nt.eSVG,st="all";g.match(P)?(L=nt.eSVG,st=g.replace(P,"")):g.match(F)?(L=nt.eDXF,st=g.replace(F,"")):g==="allsvg"?L=nt.eSVGALL:g==="alldxf"?L=nt.eDXFALL:g==="compute_log"?L=nt.eTXTLOG:g==="pax"?L=nt.ePAX:g==="oscad"?L=nt.eOPENSCAD:g==="ojscad"?L=nt.eJSCAD:g==="freecad"?L=nt.eFREECAD:g==="zip"?L=nt.eZIP:console.log(`err883: downloadExport iExportFace ${g} invalid`);const Xt=ds(L),et=_s(L),ht=us(L),ot=t.pDef.partName+"_"+st+"_"+Q()+Xt;if(ht){const Vt=await vs(t.fgeom,o(v),H[t.pDef.partName],t.pDef,L);I(ot,Vt)}else{const Vt=za(t.fgeom,H[t.pDef.partName],t.pDef,st,L);T(ot,Vt,et)}}let B,ct=G("");function it(g){h(ct,g,!0),B.showModal()}function S(g,P){it(za(t.fgeom,H[t.pDef.partName],t.pDef,g,P))}function y(){B.close()}var V=_r(),q=Lt(V);hl(q,{get pDef(){return t.pDef},get pFig(){return o(x)}});var J=l(q,2),E=l(r(J),2);ma(E);let at;a(J);var dt=l(J,2),rt=r(dt),K=l(r(rt));Ot(K,16,()=>o(f),g=>g,(g,P)=>{var F=Zl();F.__click=[Vl,d,P];var L=r(F,!0);a(F),tt(()=>{pt(F,1,Sa({theFace:o(d)===P}),"svelte-8jmax4"),w(L,P)}),O(g,F)});var ut=l(K,2);ut.__click=[ql,d,s],a(rt),a(dt);var gt=l(dt,2);Ml(gt,{get pDefSim(){return t.pDef.sim},get pFig(){return o(x)},get simTime(){return o(v)},set simTime(g){h(v,g,!0)}});var mt=l(gt,2),jt=l(r(mt),2),m=l(r(jt),2),z=r(m),C=l(r(z)),Y=r(C);a(C);var xt=l(C,2),Ut=r(xt);Ut.__click=[El,it,t],a(xt);var Nt=l(xt),qt=r(Nt);qt.__click=[Yl,t],a(Nt),a(z);var At=l(z),Pt=l(r(At)),Wt=r(Pt);a(Pt);var Yt=l(Pt,2),le=r(Yt);le.__click=[Kl,S],a(Yt);var xe=l(Yt),ra=r(xe);ra.__click=[Gl,M],a(xe),a(At);var ke=l(At);Ot(ke,18,()=>o(f),g=>g,(g,P,F)=>{var L=Jl(),st=r(L),Xt=r(st,!0);a(st);var et=l(st),ht=r(et);a(et);var ot=l(et,2),Vt=r(ot);Vt.__click=[Bl,S,P],a(ot);var Gt=l(ot),Zt=r(Gt);Zt.__click=[Hl,M,P],a(Gt),a(L),tt(()=>{w(Xt,3+o(F)),w(ht,`${t.pDef.partName??""}_${P??""}.svg`)}),O(g,L)});var re=l(ke),ne=r(re),Ve=r(ne,!0);a(ne);var he=l(ne),Ze=r(he);a(he);var pe=l(he,2),je=r(pe);je.__click=[Ql,S],a(pe);var oe=l(pe),qe=r(oe);qe.__click=[$l,M],a(oe),a(re);var ye=l(re);Ot(ye,18,()=>o(f),g=>g,(g,P,F)=>{var L=ar(),st=r(L),Xt=r(st,!0);a(st);var et=l(st),ht=r(et);a(et);var ot=l(et,2),Vt=r(ot);Vt.__click=[tr,S,P],a(ot);var Gt=l(ot),Zt=r(Gt);Zt.__click=[er,M,P],a(Gt),a(L),tt(()=>{w(Xt,4+o(f).length+o(F)),w(ht,`${t.pDef.partName??""}_${P??""}.dxf`)}),O(g,L)});var ce=l(ye),ie=r(ce),na=r(ie,!0);a(ie);var ve=l(ie),de=r(ve);a(ve);var ue=l(ve,2),we=r(ue);we.__click=[sr,S],a(ue);var Ee=l(ue),Ke=r(Ee);Ke.__click=[lr,M],a(Ee),a(ce);var De=l(ce),b=r(De),k=r(b,!0);a(b);var D=l(b),R=r(D);a(D);var $=l(D,2),vt=r($);vt.__click=[rr,S],a($);var Ft=l($),fe=r(Ft);fe.__click=[nr,M],a(Ft),a(De);var yt=l(De),Bt=r(yt),Ht=r(Bt,!0);a(Bt);var Jt=l(Bt),kt=r(Jt);a(Jt);var Qt=l(Jt,2),Ge=r(Qt);Ge.__click=[or,S],a(Qt);var It=l(Qt),W=r(It);W.__click=[cr,M],a(It),a(yt);var ze=l(yt),Et=r(ze),Be=r(Et,!0);a(Et);var $t=l(Et),oa=r($t);a($t);var te=l($t,2),Le=r(te);Le.__click=[ir,S],a(te);var He=l(te),Se=r(He);Se.__click=[vr,M],a(He),a(ze);var Ne=l(ze),Ae=r(Ne),ca=r(Ae,!0);a(Ae);var Kt=l(Ae),Je=r(Kt);a(Kt);var Ce=l(Kt,2),_e=r(Ce);_e.__click=[dr,S],a(Ce);var Oe=l(Ce),ia=r(Oe);ia.__click=[ur,M],a(Oe),a(Ne);var me=l(Ne),Pe=r(me),Fe=r(Pe,!0);a(Pe);var Me=l(Pe),Te=r(Me);a(Me);var Re=l(Me,3),va=r(Re);va.__click=[fr,M],a(Re),a(me),a(m),a(jt);var wt=l(jt,2),Mt=r(wt);ma(Mt);var Ct=l(Mt,2);Ct.__click=y,a(wt),sa(wt,g=>B=g,()=>B);var Tt=l(wt,2);Wl(Tt,{get subD(){return o(_)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),a(mt),tt(g=>{aa(E,o(p)),at=pt(E,1,"svelte-8jmax4",null,at,g),pt(ut,1,Sa({theFace:o(d)===s}),"svelte-8jmax4"),w(Y,`px_${t.pDef.partName??""}.json`),w(Wt,`${t.pDef.partName??""}_all.log`),w(Ve,3+o(f).length),w(Ze,`${t.pDef.partName??""}_all.svg`),w(na,4+2*o(f).length),w(de,`${t.pDef.partName??""}_all.dxf`),w(k,5+2*o(f).length),w(R,`${t.pDef.partName??""}_all.pax.json`),w(Ht,6+2*o(f).length),w(kt,`${t.pDef.partName??""}_all_noarc_openscad.scad`),w(Be,7+2*o(f).length),w(oa,`${t.pDef.partName??""}_all_noarc_jscad.js`),w(ca,8+2*o(f).length),w(Je,`${t.pDef.partName??""}_all_freecad.py`),w(Fe,9+2*o(f).length),w(Te,`${t.pDef.partName??""}_all.zip`),aa(Mt,o(ct))},[()=>({colorErr:o(A),colorWarn:o(N)})]),O(e,V),_t()}Rt(["click"]);var br=U('<h1 class="svelte-1aya6oa"> </h1> <article class="svelte-1aya6oa"> </article> <!> <!>',1);function gr(e,t){ft(t,!0),zs(t.pageDef);var s=br(),n=Lt(s),c=r(n,!0);a(n);var i=l(n,2),v=r(i);a(i);var d=l(i,2);Os(d,{get pDef(){return t.pageDef.pDef}});var u=l(d,2);mr(u,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),tt(()=>{w(c,t.pageDef.pTitle),w(v,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),O(e,s),_t()}function Ar(e,t){ft(t,!0),gr(e,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),_t()}export{Ar as component,Nr as universal};
